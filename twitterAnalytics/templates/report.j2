{% extends "layout.j2" %}
{% block content %}
  <form action="/report" method="POST">
    <fieldset class="form-group">
      <div class="row">              
          <div class="col-sm-10">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="rtype" id="hashtag" onchange="changeOptions(this);" value="0">
              <label class="form-check-label" for="gridRadios1">
                Hashtag
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="rtype" id="profile" onchange="changeOptions(this);" value="1" checked>
              <label class="form-check-label" for="gridRadios2">
                Profile
              </label>
            </div>                
          </div>
      </div>
    </fieldset>
    <label for="selectedReport">Select your report:</label>    
    <select class="form-control" id="0" name="hashtag_report" style="visibility:hidden">
      {% for r in reports %}
        {% if r['rtype'] == 0 %}
          <option value="{{ r['rname'] }}">{{ r['rname'] }}</option>
        {% endif %}
      {% endfor%}
    </select>
    <select class="form-control" id="1" name="profile_report" style="visibility:visible">
      {% for r in reports %}
        {% if r['rtype'] == 1 %}
          <option value="{{ r['rname'] }}">{{ r['rname'] }}</option>
        {% endif %}
      {% endfor%}
    </select>
    <button type="submit" class="btn btn-success"/>Submit      
  </form>
  <script>
    function changeOptions(selectEl) {
      let selectedValue = selectEl.value;
      let subForms = document.getElementsByClassName('form-control')
      for (let i = 0; i < subForms.length; i += 1) {
        if (selectedValue === subForms[i].id) {
          subForms[i].setAttribute('style', 'display:inline')
        } 
        else {
          subForms[i].setAttribute('style', 'display:none') 
        }
      }
    }
  </script>
{% endblock %}